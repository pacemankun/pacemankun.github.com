<!--
 * @Descripttion: carminiapp
 * @version: 1.1.1
 * @Author: liukun
 * @Date: 2025-04-30 17:16:13
 * @LastEditTime: 2025-05-05 11:52:56
 * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
-->
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>å°å®‹æ”¶æˆ¿</title>
    <style>
      /* é‡ç½®é»˜è®¤æ ·å¼ */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box; /* w=w+p+b */
      }

      html {
        /* è®¾ç½®æ ¹å­—ä½“å¤§å°ï¼Œ1rem = 100pxï¼ˆæ–¹ä¾¿è®¡ç®—ï¼‰ */
        font-size: 100px;
      }

      body {
        font-family: "Helvetica Neue", Arial, sans-serif;
        line-height: 1.5;
        color: #333;
      }

      /* å¤´éƒ¨ */
      .header {
        height: 1rem;
        font-size: 0.3rem;
        background-color: #4285f4;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* é¡µé¢å®¹å™¨ */
      .content {
        font-size: 0.16rem;
        width: 100%;
        margin: 0 auto;
        padding: 0.4rem 0.2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }
      .content .lineIterm {
        padding: 0.2rem;
        width: 3rem;
      }
      label {
        display: inline-block;
        max-width: 2rem;
      }
      input {
        display: inline-block;
        max-width: 2.8rem;
      }
      input[type^="numbe"],
      input[type="text"] {
        text-indent: 0.05rem;
      }
      /* åˆ†å‰²çº¿å®šä½ */
      .hr-with-text {
        position: relative;
        text-align: center;
        margin-top: 0.2rem;
        width: 100%;
      }

      .hr-with-text hr {
        border: none;
        border-top: 0.02rem solid #ddd;
      }
      .hr-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .hr-text {
        font-size: 0.18rem;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        color: #666;
      }
      .answer {
        width: 100%;
        padding: 0.3rem 0;
        font-size: 0.3rem;
        color: hsl(215.32deg 100% 68.19% / 94.9%);
        white-space: pre-wrap;
        word-wrap: break-word;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>æ”¶ç›Šè®¡ç®—</h1>
    </div>

    <div class="content">
      <div class="hr-with-text">
        <hr />
        <span class="hr-text">ã€åŸºæœ¬æƒ…å†µã€‘</span>
      </div>
      <section class="lineIterm">
        <label>æˆ¿äº§é¢ç§¯ï¼š</label>
        <input type="number" class="area" />
      </section>
      <section class="lineIterm">
        <label class="labelYear">ç§Ÿèµå¹´ï¼š</label>
        <input
          id="rangeYear"
          type="range"
          min="3"
          max="10"
          step="1"
          value="5"
        />
      </section>
      <div class="hr-with-text">
        <hr />
        <span class="hr-text">ã€æˆæœ¬æ³¨å…¥ã€‘</span>
      </div>
      <section class="lineIterm">
        <label>è£…ä¿®æˆæœ¬ï¼š</label>
        <input type="number" class="fixCost" />
      </section>

      <section class="lineIterm">
        <label>æˆ¿ä¸œæœˆç§Ÿï¼š</label>
        <input type="number" class="landlord" />
      </section>

      <section class="lineIterm">
        <label>æ¯æœˆå®½å¸¦ï¼š</label>
        <input type="number" value="30" class="internet" />
      </section>

      <section class="lineIterm">
        <label class="labelVacant">å¹´ç©ºç½®æœˆï¼š</label>
        <input
          id="reduceMonth"
          type="range"
          min="0"
          max="3"
          step="1"
          value="1"
        />
      </section>

      <section class="lineIterm">
        <label>ä¾›æš–ç‰©ä¸šè´¹ï¼š</label>
        <input type="radio" name="heating" value="1" checked />
        <label for="male">æ‰¿æ‹…</label>

        <input type="radio" name="heating" value="0" />
        <label for="female">ä¸æ‰¿æ‹…</label>
      </section>

      <section class="lineIterm">
        <label>æœˆç§Ÿæ”¶å…¥ï¼š</label>
        <input type="number" value="3000" class="rentTotal" />
      </section>
      <div class="hr-with-text">
        <hr />
        <button class="hr-btn">åˆ©æ¶¦åˆ†æ</button>
      </div>
      <!-- 
      <pre>æ ‡ç­¾æ€§è´¨div=>ç”Ÿæ•ˆæ–‡æœ¬æ¢è¡Œç¬¦[\n] 
      answerContentDOM.textContent = "ç¬¬ä¸€è¡Œ\nç¬¬äºŒè¡Œ\nç¬¬ä¸‰è¡Œ";
      console.info(printStrings); 
      -->
      <pre class="answer"></pre>
    </div>

    <script>
      // å–å€¼
      let areaInputDom = document.querySelector(".area");
      let rangeYearInputDom = document.querySelector("#rangeYear");
      let fixCostInputDom = document.querySelector(".fixCost");
      let landlordInputDom = document.querySelector(".landlord");
      let internetInputDom = document.querySelector(".internet");
      let reduceMonthInputDom = document.querySelector("#reduceMonth");
      let heatingInputDom = document.querySelector(
        'input[name="heating"]:checked'
      );
      let rentTotalInputDom = document.querySelector(".rentTotal"); // é¢„æœŸæ¯æœˆè¿›é¡¹
      const btnAssistDOM = document.querySelector(".hr-btn");
      const answerContentDOM = document.querySelector(".answer");

      // ç”Ÿæˆéšæœºæ•°
      let createRandom = (min, max) => (Math.random() * (max - min) + min) | 0;

      // åŠ¨æ€è®¾å®šæ ¹å­—ä½“
      function recalc() {
        let doc = document.documentElement;
        console.count("æ‰§è¡Œ");
        doc.style.fontSize = 100 * (doc.clientWidth / 800) + "px";
      }
      recalc();
      window.addEventListener("resize", recalc, false);

      // range(æˆ¿ä¸œç§ŸæœŸ)
      let rangeYear = () => {
        document.querySelector(
          "label.labelYear"
        ).innerHTML = `ç§Ÿèµ${rangeYearInputDom.value}å¹´ï¼š`;
      };
      rangeYear();
      document
        .querySelector("#rangeYear")
        .addEventListener("input", rangeYear, false);

      // range(ç©ºç½®æœŸå‡å…)
      let rangeVacant = () => {
        document.querySelector(
          "label.labelVacant"
        ).innerHTML = `å¹´ç©ºç½®${reduceMonthInputDom.value}æœˆï¼š`;
      };
      rangeVacant();
      document
        .querySelector("#reduceMonth")
        .addEventListener("input", rangeVacant, false);

      // åˆ†æå¼€å§‹
      let resultShow = () => {
        btnAssistDOM.disabled = true;
        answerContentDOM.style["background"] = "";
        answerContentDOM.textContent = "deepseekæ€è€ƒä¸­ğŸ¤”ğŸ¤”ğŸ¤”...";

        // æ ¸ç®—æ¯æœˆæ”¯å‡º
        const cost1 = Math.ceil(
          landlordInputDom.value * (1 - reduceMonthInputDom.value / 12)
        ); // æˆ¿ä¸œç§Ÿé‡‘
        const cost2 = Math.ceil(
          fixCostInputDom.value / rangeYearInputDom.value / 12
        ); // è£…ä¿®è´¹ç”¨
        const cost3 = +heatingInputDom.value
          ? Math.ceil((18.8 * areaInputDom.value) / 12)
          : 0; // ä¾›æš–è´¹
        const cost4 = +heatingInputDom.value
          ? Math.ceil(3.1 * areaInputDom.value)
          : 0; // ç‰©ä¸šè´¹
        const cost5 = Math.ceil(internetInputDom.value); //å®½å¸¦è´¹
        const costTotal = cost1 + cost2 + cost3 + cost4 + cost5; //åˆè®¡

        const printStrings = `ã€æ¯æœˆæˆæœ¬è®¡ç®—ã€‘\næˆ¿ä¸œç§Ÿé‡‘ï¼š${cost1}\nè£…ä¿®è´¹ç”¨ï¼š${cost2}\nä¾›æš–è´¹ï¼š${cost3}\nç‰©ä¸šè´¹ï¼š${cost4}\nå®½å¸¦è´¹ï¼š${cost5}\nåˆè®¡ï¼š${costTotal}\n----------------------------\nç»“åˆæˆ‘ä»¬é¢„ä¼°çš„æœˆç§Ÿé‡‘æ”¶å…¥ï¼š${
          rentTotalInputDom.value
        }\nå¾—å‡ºæœˆåˆ©æ¶¦ï¼š${rentTotalInputDom.value - costTotal}\nè£…ä¿®å›æœ¬å‘¨æœŸï¼š${(
          fixCostInputDom.value /
          (rentTotalInputDom.value - costTotal)
        ).toFixed(2)}æœˆ\næŒç»­${rangeYearInputDom.value}å¹´,æ€»è®¡åˆ©æ¶¦${
          (rentTotalInputDom.value - costTotal) * 12 * rangeYearInputDom.value
        }\næˆæœ¬åˆ©æ¶¦ç‡(æ¯æŠ•å…¥1å…ƒæ‰€è·åˆ©æ¶¦,éœ€åˆ°è¾¾75%ä»¥ä¸Š)ï¼š${Math.ceil(
          ((rentTotalInputDom.value - costTotal) / costTotal) * 100
        )}%${
          (rentTotalInputDom.value - costTotal) / costTotal >= 0.75
            ? "------âœ…"
            : "------âŒ"
        }`;

        // æ‰“å­—è¾“å‡ºåˆ†æç»“æœ
        let waitTime = createRandom(1500, 4000); // å¾ªç¯å‰å°±å›ºå®š(é¿å…åœ¨å¾ªç¯é‡Œå„è‡ªéšæœº)
        for (let i = 0; i < printStrings.length; i++) {
          setTimeout(() => {
            i == 0 && (answerContentDOM.textContent = "");
            if (i == printStrings.length - 1) {
              btnAssistDOM.disabled = false;
              answerContentDOM.style["background"] =
                (rentTotalInputDom.value - costTotal) / costTotal > 0.75
                  ? "#00ff3b36"
                  : "#ff00002b";
            }
            answerContentDOM.textContent += printStrings[i];
          }, waitTime + i * 50);
        }
        // answerContentDOM.textContent = printStrings;
        console.info(printStrings);
      };

      btnAssistDOM.addEventListener("click", resultShow, false);
    </script>
  </body>
</html>
